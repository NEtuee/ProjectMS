
<AIPackage Name="SamplePackage" DefaultState="Entry">
    <BranchSet Name="EvadeTypeBranchSet">
        <Branch Condition="getTargetFrameTag_Attack && (TargetDistance < 2.0)" Execute="Dodge"/>
    </BranchSet>
    <Event_OnAttacked>
        <AIEvent Type="ExecuteState" Execute="Hit"/>
    </Event_OnAttacked>

    <Event_OnGuarded>
        <AIEvent Type="ExecuteState" Execute="Guarded"/>
    </Event_OnGuarded>

    <Event_OnParried>
        <AIEvent Type="ExecuteState" Execute="Parried"/>
    </Event_OnParried>

    <AIState>
        <Entry UpdateTime="0.5" TargetSearchType="Near" TargetSearchRange="1.0" SearchIdentifier="Player">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="Idle"/>
            </Event_OnExecute>

            <UseBranchSet Name="EvadeTypeBranchSet"/>
            <Branch Condition="(TargetDistance > 2.1) && TargetExists" Execute="Chase"/>
            <Branch Condition="(TargetDistance < 1.9)" Execute="MOV_Alert"/>
        </Entry>

        <Chase UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="MoveAll"/>
            </Event_OnExecute>

            <UseBranchSet Name="EvadeTypeBranchSet"/>
            <Branch Condition="(TargetDistance < 1.9)" Execute="MOV_Alert"/>
            <Branch Condition="(TargetDistance > 2.5) && (TargetDistance < 3.0)" Execute="ChaseFaster"/>
            <Branch Condition="(TargetDistance > 3.0) && (TargetDistance < 8.0)" Execute="ATK_F_ChargeAttack_Charge"/>
            <Event_OnUpdate>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnUpdate>
        </Chase>

        <ChaseFaster UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="Dash"/>
            </Event_OnExecute>

            <UseBranchSet Name="EvadeTypeBranchSet"/>
            <Branch Condition="(TargetDistance < 2.5) && End == true" Execute="Chase"/>
            <Branch Condition="(TargetDistance > 2.5) && End == true" Execute="ChaseFaster"/>
            <Event_OnUpdate>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnUpdate>
        </ChaseFaster>
        <Dodge UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget" Angle="90.0"/>
                <AIEvent Type="SetAction" Action="Dash"/>
            </Event_OnExecute>
            
            <Branch Condition="End == true" Execute="MOV_Alert"/>
        </Dodge>
        <MOV_Alert UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget" Angle="90.0"/>
                <AIEvent Type="SetAction" Action="MoveAll"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget" Angle="90.0"/>
            </Event_OnFrame>
            <UseBranchSet Name="EvadeTypeBranchSet"/>
            <Branch Condition="(TargetDistance < 1.5)" Execute="ATK_C_Thrust_Charge"/>
            <Branch Condition="(TargetDistance > 2.1) && TargetExists" Execute="Chase"/>
        </MOV_Alert>

        <Hit UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="Hit"/>
            </Event_OnExecute>

            <UseBranchSet Name="EvadeTypeBranchSet"/>
            <Branch Condition="End == true" Execute="Entry"/>
        </Hit>

        <Guarded UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="Attack_Guarded"/>
            </Event_OnExecute>

            <UseBranchSet Name="EvadeTypeBranchSet"/>
            <Branch Condition="End == true" Execute="Entry"/>
        </Guarded>

        <Parried UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="Attack_Guarded"/>
            </Event_OnExecute>

            <Branch Condition="End == true" Execute="Entry"/>
        </Parried>

        <ATK_C_Thrust_Charge UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="AttackCharge"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <UseBranchSet Name="EvadeTypeBranchSet"/>
            <Branch Condition="End == true" Execute="ATK_C_Thrust_Prepare"/>
        </ATK_C_Thrust_Charge>

        <ATK_C_Thrust_Prepare UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="AttackPrepare"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <Branch Condition="End == true" Execute="ATK_C_Thrust_Execute"/>
        </ATK_C_Thrust_Prepare>

        <ATK_C_Thrust_Execute UpdateTime="1.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="ATK_C_Thrust"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <Branch Condition="true" Execute="Chase"/>
        </ATK_C_Thrust_Execute>

        <ATK_C_ComboAttack_Charge UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="AttackCharge"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <Branch Condition="End == true" Execute="ATK_C_ComboAttack_Prepare"/>
        </ATK_C_ComboAttack_Charge>

        <ATK_C_ComboAttack_Prepare UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="AttackPrepare"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <Branch Condition="End == true" Execute="ATK_C_ComboAttack_Execute_01"/>
        </ATK_C_ComboAttack_Prepare>

        <ATK_C_ComboAttack_Execute_01 UpdateTime="0.4">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="ATK_C_ComboAttack_01"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <Branch Condition="true" Execute="ATK_C_ComboAttack_Execute_02"/>
        </ATK_C_ComboAttack_Execute_01>

        <ATK_C_ComboAttack_Execute_02 UpdateTime="0.4">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="ATK_C_ComboAttack_02"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <Branch Condition="true" Execute="ATK_C_ComboAttack_Execute_03"/>
        </ATK_C_ComboAttack_Execute_02>

        <ATK_C_ComboAttack_Execute_03 UpdateTime="0.4">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="ATK_C_ComboAttack_03"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <Branch Condition="true" Execute="ATK_C_ComboAttack_Execute_04"/>
        </ATK_C_ComboAttack_Execute_03>

        <ATK_C_ComboAttack_Execute_04 UpdateTime="0.4">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="ATK_C_ComboAttack_04"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>

            <Branch Condition="true" Execute="Chase"/>
        </ATK_C_ComboAttack_Execute_04>


        <ATK_F_ChargeAttack_Charge UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="FarAttackCharge"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>
            
            <UseBranchSet Name="EvadeTypeBranchSet"/>
            <Branch Condition="End == true" Execute="ATK_F_ChargeAttack_Prepare"/>
        </ATK_F_ChargeAttack_Charge>

        <ATK_F_ChargeAttack_Prepare UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="AttackPrepare"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>
            <Branch Condition="End == true" Execute="ATK_F_ChargeAttack_Execute"/>
        </ATK_F_ChargeAttack_Prepare>

        <ATK_F_ChargeAttack_Execute UpdateTime="1.0">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="ATK_F_ChargeAttack"/>
            </Event_OnExecute>
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>
            <Branch Condition="true" Execute="Chase"/>
        </ATK_F_ChargeAttack_Execute>
    </AIState>
</AIPackage>