<AIPackage Name="MilkMissilePackage" DefaultState="AI_Launch">

    <BranchSet Name="ReactionSet">
        <Branch Condition="Dead" Execute="AI_Dead"/>
        <Branch Condition="Hit" Execute="AI_Hit"/>
        <Branch Condition="GuardBreakFail || GuardBroken" Execute="AI_GuardBroken"/>
        <Branch Condition="AttackSuccess" Execute="AI_Explosion"/>
    </BranchSet>

    <AIState>
        <AI_Launch UpdateTime="0.0" TargetSearchType="Near" TargetSearchRange="999.0" AllyTarget="Enemy">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="AC_Launch"/>
            </Event_OnExecute>

            <UseBranchSet Name="ReactionSet"/>
            <Branch Condition="ActionExecutedTime >= 0.2" Execute="AI_Chase"/>
            
        </AI_Launch>

        <AI_Hit UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="AC_Hit"/>
            </Event_OnExecute>

            <UseBranchSet Name="ReactionSet"/>
            <Branch Condition="End" Execute="AI_Explosion"/>
        </AI_Hit>

        <AI_GuardBroken UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="AC_GuardBroken"/>
            </Event_OnExecute>

            <UseBranchSet Name="ReactionSet"/>
            <Branch Condition="End" Execute="AI_Explosion"/>
        </AI_GuardBroken>

        <AI_Chase UpdateTime="0" TargetSearchType="Near" TargetSearchRange="999.9" AllyTarget="Enemy">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget" Speed="360"/>
                <AIEvent Type="SetAction" Action="AC_Move"/>
            </Event_OnExecute>

            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget" Speed="360"/>
            </Event_OnFrame>
            
            <Branch Condition="AngleToTarget <= 1.0" Execute="AI_ChaseLockOn"/>
        </AI_Chase>

        <AI_ChaseLockOn UpdateTime="0" TargetSearchType="Near" TargetSearchRange="999.9" AllyTarget="Enemy">
            <Event_OnExecute>
                <AIEvent Type="SetDirectionToTarget"/>
                <AIEvent Type="SetAction" Action="AC_Move"/>
            </Event_OnExecute>

            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>
            
            <Branch Condition="End" Execute="AI_ChaseLockOn"/>
            <Branch Condition="ActionExecutedTime >= 1.0" Execute="AI_ExploChase"/>
        </AI_ChaseLockOn>

        <AI_ExploChase UpdateTime="0.1" TargetSearchType="Near" TargetSearchRange="999.9" AllyTarget="Enemy">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="AC_ExplosionChase"/>
            </Event_OnExecute>
            
            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>
            
            <Branch Condition="End" Execute="AI_ExploChase"/>
        </AI_ExploChase>

        <AI_Explosion UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="AC_Explosion"/>
            </Event_OnExecute>

            <UseBranchSet Name="ReactionSet"/>
        </AI_Explosion>

        <AI_Dead UpdateTime="999.0">
            <Event_OnExecute>
               <AIEvent Type="SetAction" Action="Dead"/>
               <AIEvent Type="TerminatePackage"/>
            </Event_OnExecute>

            <UseBranchSet Name="ReactionSet"/>
        </AI_Dead>
    </AIState>

</AIPackage>