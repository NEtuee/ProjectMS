<ActionGraph Name="MilkBox" DefaultAction="AC_Idle" DefaultFramePerSecond="12">

    <GlobalVariable Name="gv_DanmakuPath" Value="Assets/Data/DanmakuGraph/Enemy/Milk.xml"/>    

        <AC_Idle MovementType="FrameEvent" DirectionType="AlwaysRight">
            <Animation Preset="Sprites/Object/MilkBox/1_idle" XFlip="false" Duration="1.2">
            </Animation>

            <Branch Condition="End == true" Execute="AC_Idle"/>
        </AC_Idle>
        
        <AC_Hit MovementType="FrameEvent" DirectionType="AlwaysRight" FlipType="Direction" RotationType="Keep">
            <Animation Preset="Sprites/Object/MilkBox/4_hitright" XFlip="true" Duration="0.2">
                <FrameEvent Type="AudioPlay" StartTime="0" ID="4913" Attach="true"/>
                <FrameEvent Type="Danmaku" StartTime="0" Gravity="9.8" Offset="0.0 -0.1 0.0" Path="Assets/Data/DanmakuGraph/Enemy/Milk.xml"/>
            </Animation>
            <Trigger Condition="DefenceSuccess">
                <FrameEvent Type="AudioPlay" ID="4915" Attach="true"/>
            </Trigger>
            <Branch Condition="End == true" Execute="Dead"/>
        </AC_Hit>

        <AC_GuardBroken MovementType="FrameEvent" DirectionType="Keep" >
            <Animation Preset="Sprites/Object/MilkBox/5_guardbroken" XFlip="false" Duration="0.1" >
                <FrameEvent Type="Movement" StartTime="0" Friction="1" Velocity="-1" MaxVelocity="7" Speed="0"/>
                <FrameEvent Type="AudioPlay" StartTime="0" ID="4913" Attach="true"/>
                
                <!-- 좌측으로 날아감-->
                <FrameEvent Type="Effect" Condition="(AngleToTarget < 45.0) || (AngleToTarget > 315.0)" StartTime="0" Path="Sprites/Object/MilkBox/6_dead" FramePerSecond="0.2" CastShadow="True" >
                    <Physics UseGravity="True" Velocity="Random_-1.5^-2.5 Random_-1.5^3.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
                </FrameEvent>
                
                <!-- 우측으로 날아감-->
                <FrameEvent Type="Effect" Condition="(AngleToTarget > 135.0) && (AngleToTarget < 225.0)" StartTime="0" Path="Sprites/Object/MilkBox/6_dead" FramePerSecond="0.2" CastShadow="True" >
                    <Physics UseGravity="True" Velocity="Random_1.5^2.5 Random_-1.5^3.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
                </FrameEvent>
                <FrameEvent Type="KillEntity" StartTime="0"/>

                <!-- 아래로 날아감-->
                <FrameEvent Type="Effect" Condition="(AngleDirectionToTarget >= 45.0) && (AngleDirectionToTarget <= 135.0)" StartTime="0" Path="Sprites/Object/MilkBox/6_dead" FramePerSecond="0.2" CastShadow="True" >
                    <Physics UseGravity="True" Velocity="Random_-1.5^3.5 Random_-1.5^-2.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
                </FrameEvent>
                
                <!-- 위로 날아감-->
                <FrameEvent Type="Effect" Condition="(AngleDirectionToTarget <= -45.0) && (AngleDirectionToTarget >= -135.0)" StartTime="0" Path="Sprites/Object/MilkBox/6_dead" FramePerSecond="0.2" CastShadow="True" >
                    <Physics UseGravity="True" Velocity="Random_-1.5^3.5 Random_1.5^2.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
                </FrameEvent>
                <FrameEvent Type="KillEntity" StartTime="0"/>
            </Animation>

            <Branch Condition="End == true" Execute="AC_Idle"/>
        </AC_GuardBroken>
        
        <Dead MovementType="FrameEvent" DirectionType="AlwaysRight">
            <Animation Preset="Sprites/Object/MilkBox/6_dead" XFlip="false" Duration="0.3">

                <FrameEvent Type="Effect" StartTime="0" Path="Sprites/Object/MilkBox/6_dead" FramePerSecond="0.2" CastShadow="True" >
                    <Physics UseGravity="True" Velocity="Random_-2.5^2.5 Random_1.5^3.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
                </FrameEvent>
                <FrameEvent Type="KillEntity" StartTime="0"/>

            </Animation>

            <Branch Condition="End == true" Execute="Dead"/>
        </Dead>

        <AC_Destory MovementType="FrameEvent" DirectionType="AttackedPoint" DirectionAngle="180">
            <Animation Preset="Sprites/Object/MilkBox/6_dead" XFlip="false" Duration="0.1">

                <FrameEvent Type="Effect" StartTime="0" Path="Sprites/Object/MilkBox/7_destory" FramePerSecond="0.2" CastShadow="True">
                    <Physics UseGravity="True" Velocity="Random_1.6^2.5 Random_1.5^3.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
                </FrameEvent>
                <FrameEvent Type="KillEntity" StartTime="0"/>

            </Animation>

                <Branch Condition="End == true" Execute="Dead"/>
        </AC_Destory>

    </ActionGraph>