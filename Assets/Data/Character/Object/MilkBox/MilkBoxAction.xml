<ActionGraph Name="MilkBox" DefaultAction="AC_Idle" DefaultFramePerSecond="12">

    <GlobalVariable Name="gv_DanmakuPath" Value="Assets/Data/DanmakuGraph/Enemy/Milk.xml"/>    

        <AC_Idle MovementType="FrameEvent" DirectionType="AlwaysRight" DirectionAngle="-90" >
            <Animation Preset="Sprites/Object/MilkBox/1_idle" XFlip="false" Duration="1.2">
                <FrameEvent Type="Movement" StartFrame="0" Friction="1" MaxVelocity="0.5" Speed="1.2"/>
            </Animation>

            <Branch Condition="End == true" Execute="AC_Idle"/>
        </AC_Idle>
        
        <AC_Move MovementType="FrameEvent" DirectionType="AlwaysRight" DirectionAngle="90" >
            <Animation Preset="Sprites/Object/MilkBox/2_move" XFlip="false" Duration="1.2">
                <FrameEvent Type="Movement" StartFrame="0" Friction="1" MaxVelocity="0.5" Speed="1.2"/>
            </Animation>

            <Branch Condition="End == true" Execute="AC_Move"/>
        </AC_Move>
        
        <AC_Hit_R MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction" RotationType="Keep">
            <Animation Preset="Sprites/Object/MilkBox/4_hitright" XFlip="true" Duration="0.5">
                <FrameEvent Type="AudioPlay" StartTime="0" ID="4913" Attach="true"/>
                <FrameEvent Type="Danmaku" Condition="Milk" StartTime="0" Path="gv_DanmakuPath" Offset="0.5 0.12 0" UseFlip="true"/>
            </Animation>
            <Trigger Condition="DefenceSuccess">
                <FrameEvent Type="AudioPlay" ID="4915" Attach="true"/>
            </Trigger>
            <Branch Condition="End == true" Execute="Dead"/>
        </AC_Hit_R>

        <AC_GuardBroken MovementType="FrameEvent" DirectionType="AttackedPoint" DirectionAngle="180">
            <Animation Preset="Sprites/Object/MilkBox/5_guardbroken" XFlip="false" Duration="0.1">
                <FrameEvent Type="Movement" StartTime="0" Friction="1" Velocity="7" MaxVelocity="7" Speed="0"/>
            </Animation>

            <Branch Condition="End == true" Execute="AC_Idle"/>
        </AC_GuardBroken>
        
        <Dead MovementType="FrameEvent" DirectionType="AlwaysRight">
            <Animation Preset="Sprites/Object/MilkBox/6_dead" XFlip="false" Duration="0.3">

                <FrameEvent Type="Effect" StartTime="0" Path="Sprites/Object/MilkBox/6_dead" FramePerSecond="0.2" CastShadow="True">
                    <Physics UseGravity="True" Velocity="Random_-2.5^2.5 Random_1.5^3.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
                </FrameEvent>
                <FrameEvent Type="KillEntity" StartTime="0"/>

            </Animation>

            <Branch Condition="End == true" Execute="Dead"/>
        </Dead>

    </ActionGraph>