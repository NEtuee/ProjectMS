<AIGraph Name="CrimsonGirmoireAI" DefaultState="Entry">

    <Include Path="Assets/Data/AILibrary/Package/CommonDeadPackage.xml"/>
    <Include Path="Assets/Data/AILibrary/Package/CommonIdlePackage.xml"/>

    <AIPackage Name="HelenaBookEntryPackage" DefaultState="AI_Attach">
        <AIState>
            <AI_Attach TargetSearchType="Near" TargetSearchRange="999.9" SearchIdentifier="Player">
                <Event_OnExecute>
                    <AIEvent Type="AttachRotateSlot" TargetType="Summoner"/>
                </Event_OnExecute>

                <Branch Condition="true" Execute="TerminatePackage"/>
            </AI_Attach>
            <TerminatePackage>
                <Event_OnExecute>
                    <AIEvent Type="TerminatePackage"/>
                </Event_OnExecute>
            </TerminatePackage>
        </AIState>
    </AIPackage>

    <AIPackage Name="HelenaBookStarePackage" DefaultState="AI_Keep">
        <AIState>
            <AI_WithHelena TargetSearchType="Near" TargetSearchRange="999.9" SearchIdentifier="Player">
                <Event_OnExecute>
                    <AIEvent Type="SetAction" Action="AC_Idle_WithHelena"/>
                </Event_OnExecute>

                <Branch Condition="false" Execute="TerminatePackage"/>
            </AI_WithHelena>
            <AI_ToTarget TargetSearchType="Near" TargetSearchRange="999.9" SearchIdentifier="Player">
                <Event_OnExecute>
                    <AIEvent Type="SetDirectionToTarget"/>
                    <AIEvent Type="SetAction" Action="AC_Idle"/>
                </Event_OnExecute>

                <Branch Condition="false" Execute="TerminatePackage"/>
            </AI_ToTarget>
            <AI_Keep TargetSearchType="Near" TargetSearchRange="999.9" SearchIdentifier="Player">
                <Event_OnExecute>
                    <AIEvent Type="SetAction" Action="AC_Idle_Keep"/>
                </Event_OnExecute>

                <Branch Condition="false" Execute="TerminatePackage"/>
            </AI_Keep>
            
            <TerminatePackage>
                <Event_OnExecute>
                    <AIEvent Type="TerminatePackage"/>
                </Event_OnExecute>
            </TerminatePackage>
        </AIState>
    </AIPackage>

    <!-- 디태치 커맨드 -->
    <CustomEvent_Detach>
        <AIEvent Type="DetachRotateSlot"/>
    </CustomEvent_Detach>
    <!-- 디태치 커맨드 -->
    <CustomEvent_DetachExplosion>
        <AIEvent Type="DetachRotateSlot"/>
        <AIEvent Type="SetAction" Action="AC_ExplosionStart"/>  
    </CustomEvent_DetachExplosion>
    <!-- 공격 커맨드 -->
    <CustomEvent_LaserToTarget>
        <AIEvent Type="SetAction" Action="AC_Shoot"/>
    </CustomEvent_LaserToTarget>
    <CustomEvent_LaserWith>
        <AIEvent Type="SetAction" Action="AC_Shoot_with"/>
    </CustomEvent_LaserWith>
    <CustomEvent_LaserOut>
        <AIEvent Type="SetAction" Action="AC_Shoot_out"/>
    </CustomEvent_LaserOut>
    <CustomEvent_LaserIn>
        <AIEvent Type="SetAction" Action="AC_Shoot_in"/>
    </CustomEvent_LaserIn>


    <Entry Package="HelenaBookEntryPackage">
        <Branch Condition="CurrentPackageEnd" Execute="Idle_ToTarget"/>
    </Entry>

    <Idle_Keep Package="HelenaBookStarePackage" EntryNode="AI_Keep">
        <Branch Condition="Dead" Execute="Dead"/>
    </Idle_Keep>
    <Idle_ToTarget Package="HelenaBookStarePackage" EntryNode="AI_ToTarget">
        <Branch Condition="Dead" Execute="Dead"/>
    </Idle_ToTarget>
    <Idle_WithHelena Package="HelenaBookStarePackage" EntryNode="AI_WithHelena">
        <Branch Condition="Dead" Execute="Dead"/>
    </Idle_WithHelena>

    <Dead Package="CommonDeadPackage">
    </Dead>


</AIGraph>