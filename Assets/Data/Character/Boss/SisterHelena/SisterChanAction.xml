<ActionGraph Name="SisterChanAction" DefaultAction="AC_Idle" DefaultFramePerSecond="12">

<!-- 
    <GlobalVariable Name="gv_MasterPath" Value="Sprites/Enemy/SisterHelena/"/>
-->
<GlobalVariable Name="gv_MasterPath" Value="Sprites/Enemy/SisterHelena/"/>

<!-- Default Action -->
    <AC_Entry MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="0_default/1_idle" XFlip="true" Duration="1">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="SetRotateSlotValue" StartTime="0" Speed="90" Radius="2.5"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Entry"/>
    </AC_Entry>

    <AC_Idle MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="0_default/1_idle" XFlip="true" Duration="1">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>

            <FrameEvent Type="SetRotateSlotValue" StartTime="0" Speed="90" Radius="2.5"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_Idle>

    <AC_Move MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="0_default/2_move" XFlip="true" Duration="0.5">
            <FrameEvent Type="Movement" StartTime="0" Friction="0" MaxVelocity="5" Speed="15"/>

            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Move"/>
    </AC_Move>

    <AC_SystemChase MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="0_default/2_move" XFlip="true" Duration="0.1">
            <FrameEvent Type="Movement" StartTime="0" Friction="0" MaxVelocity="20" Speed="40"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_SystemChase"/>
    </AC_SystemChase>

    <AC_Hit MovementType="FrameEvent" DirectionType="AttackedPoint" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="0_default/3_hit" XFlip="true" Duration="1.25">
            <FrameEvent Type="AudioPlay" StartTime="0" ID="2202" Attach="true"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="0" Speed="0" Velocity="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountIncrease"/>


            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_Hit>

    <Dead DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="0_default/4_dead" XFlip="true" Duration="1">
            <FrameEvent Type="Effect" StartTime="0" Path="Sprites/Enemy/SisterHelena/0_default/4_dead" FramePerSecond="0.2" CastShadow="True">
                <Physics UseGravity="True" Velocity="Random_-2.5^2.5 Random_1.5^3.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
            </FrameEvent>
            <FrameEvent Type="KillEntity" StartTime="0"/>
        </Animation>

        <Branch Condition="End == true" Execute="Dead"/>
    </Dead>

    <AC_Dash MovementType="GraphPreset" MovementGraphPreset="Preset_Dodge" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="0_default/5_dash" XFlip="true" Duration="0.7">
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_Dash>
<!-- Default Action -->

<!-- Skill Action -->
    <!-- 근거리 공격: 낙뢰 -->
    <AC_ThunderStrokeReady_Stay MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/1_thunderStroke/1_attackReady" XFlip="true" Duration="0.7">
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
            
        </Animation>
        
        <Branch Condition="TargetDistance <= 2.0" Execute="AC_ThunderStrokeReady"/>
        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ThunderStrokeReady_Stay>

    <AC_ThunderStrokeReady MovementType="GraphPreset" MovementGraphPreset="Helena_BackStep" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/1_thunderStroke/1_attackReady" XFlip="true" Duration="0.7">
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
            
        </Animation>
    
        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ThunderStrokeReady>

    <AC_ThunderStrokeMain MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/1_thunderStroke/2_attackMain" XFlip="true" Duration="0.35">
            <FrameEvent Type="Movement" StartTime="0" Friction="24" MaxVelocity="12" Velocity="0" Speed="0"/>
            <!-- 낙뢰 -->
            <FrameEvent Type="Danmaku" StartTime="0" Path="Enemy/ThunderStorm.xml" Offset="0.5 0 0" UseDirection="True"/>

            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="With" EventTargetType="SummonTargetRange" Range="100.0" SearchIdentifier="Enemy"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ThunderStrokeMain>

    <AC_ThunderStrokeRecover MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <!-- 소셜 모션, 지친 모습? 재정비 하는 모습. -->
        <Animation Preset="2_skill/1_thunderStroke/3_attackRecover" XFlip="true" Duration="1.2">
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ThunderStrokeRecover>

    <!-- 근거리 공격: 방전-->
    <AC_DischargeReady MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <!-- 기도, 오라, 폭발 차징 표현 -->
        <Animation Preset="2_skill/2_discharge/1_attackReady" XFlip="true" Duration="0.7">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
                <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_DischargeReady>
    <AC_DischargeMain MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/2_discharge/2_attackMain" XFlip="true" Duration="0.5">
            <!-- 헬레나 방전 이펙트 -->
            <FrameEvent Type="EffectPreset" StartTime="0" Key="Helena_Discharge"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="Attack" StartTime="0" EndTime="0.1" AttackPreset="Helena_Discharge">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonHalfAttack"/>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="StunSet"/>
                </OnHit>
            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_DischargeMain>
    <AC_DischargeRecover MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/2_discharge/3_attackRecover" XFlip="true" Duration="0.5">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>
        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_DischargeRecover>
        
    <!-- 원거리 공격: 썬더스톰 (광역장판) -->
    <AC_ThunderStorm_Left MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/3_thunderStorm/1_attackReady" XFlip="true" Duration="0.7">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>
        <Animation Preset="2_skill/3_thunderStorm/2_attackMain" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="8 4 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="8 2 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="8 0 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="8 -2 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="8 -4 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="Left" EventTargetType="SummonTargetRange" Range="100.0" SearchIdentifier="Enemy"/>
        </Animation>
        <Animation Preset="2_skill/3_thunderStorm/3_attackRecover" XFlip="true" Duration="0.3">
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ThunderStorm_Left>
    <AC_ThunderStorm_Right MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/3_thunderStorm/1_attackReady" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>
        <Animation Preset="2_skill/3_thunderStorm/2_attackMain" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-8 4 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-8 2 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-8 0 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-8 -2 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-8 -4 0" SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="Right" EventTargetType="SummonTargetRange" Range="100.0" SearchIdentifier="Enemy"/>
        </Animation>
        <Animation Preset="2_skill/3_thunderStorm/3_attackRecover" XFlip="true" Duration="0.3">
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ThunderStorm_Right>
    <AC_ThunderStorm_Up MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/3_thunderStorm/1_attackReady" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>
        <Animation Preset="2_skill/3_thunderStorm/2_attackMain" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="4 -4 0"   SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="2 -4 0"   SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="0 -4 0"   SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-2 -4 0"  SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-4 -4 0"  SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="Up" EventTargetType="SummonTargetRange" Range="100.0" SearchIdentifier="Enemy"/>
        </Animation>
        <Animation Preset="2_skill/3_thunderStorm/3_attackRecover" XFlip="true" Duration="0.3">
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ThunderStorm_Up>
    <AC_ThunderStorm_Down MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/3_thunderStorm/1_attackReady" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>
        <Animation Preset="2_skill/3_thunderStorm/2_attackMain" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="4 4 0"   SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="2 4 0"   SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="0 4 0"   SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-2 4 0"  SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="ThunderFloor_Shoot" Offset="-4 4 0"  SearchIdentifier="Enemy" InheritDirection="False" UseFlip="false"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="Down" EventTargetType="SummonTargetRange" Range="100.0" SearchIdentifier="Enemy"/>
        </Animation>
        <Animation Preset="2_skill/3_thunderStorm/3_attackRecover" XFlip="true" Duration="0.3">
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ThunderStorm_Down>

    <!-- 원거리 공격: 유도 장판 -->
    <AC_SpawnThunderBall MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/4_spawnBook" XFlip="true" Duration="1.0">
            <FrameEvent Type="AudioPlay" StartTime="0" ID="2208" Attach="true"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="Projectile" StartTime="0.3" GraphName="Helena_CrimsonGrimoire" DirectionType="AI" SpawnTargetType="Self"/>
            <FrameEvent Type="CallAIEvent" StartTime="0.3" EventName="AddCrimson" EventTargetType="Self"/>
            
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_SpawnThunderBall>
    <!-- 소환: 마도서 소환 -->
    <AC_SpawnCrimsonMain MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/4_spawnBook" XFlip="true" Duration="1.0">
            <FrameEvent Type="AudioPlay" StartTime="0" ID="2208" Attach="true"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="Projectile" StartTime="0.3" GraphName="Helena_CrimsonGrimoire" DirectionType="AI" SpawnTargetType="Self"/>
            <FrameEvent Type="CallAIEvent" StartTime="0.3" EventName="AddCrimson" EventTargetType="Self"/>
            
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_SpawnCrimsonMain>
    <AC_SpawnCrimsonMainSet MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/4_spawnBook" XFlip="true" Duration="1.0">
            <FrameEvent Type="AudioPlay" StartTime="0" ID="2208" Attach="true"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="Projectile" StartTime="0.3" GraphName="Helena_CrimsonGrimoire" DirectionType="AI" DirectionAngle="0.0" SpawnTargetType="Self"/>
            <FrameEvent Type="Projectile" StartTime="0.3" GraphName="Helena_CrimsonGrimoire" DirectionType="AI" DirectionAngle="120.0" SpawnTargetType="Self"/>
            <FrameEvent Type="Projectile" StartTime="0.3" GraphName="Helena_CrimsonGrimoire" DirectionType="AI" DirectionAngle="2400.0" SpawnTargetType="Self"/>
            <FrameEvent Type="CallAIEvent" StartTime="0.3" EventName="SetCrimson" EventTargetType="Self"/>
            
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_SpawnCrimsonMainSet>

    <!-- 원거리 공격: 마도서 레이저-->
    <AC_CommandBook_LaserToTarget MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/5_command/1_laser" XFlip="true" Duration="1.5">
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="LaserToTarget" EventTargetType="Range" Range="10.0" SearchIdentifier="Enemy"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_CommandBook_LaserToTarget>
    <AC_CommandBook_LaserWith MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/5_command/1_laser" XFlip="true" Duration="1.5">
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="LaserWith" EventTargetType="Range" Range="10.0" SearchIdentifier="Enemy"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_CommandBook_LaserWith>
    <AC_CommandBook_LaserOut MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/5_command/2_laserSpin" XFlip="true" Duration="3.0">
            <FrameEvent Type="SetRotateSlotValue" StartTime="0" Speed="100" Radius="1.0"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="LaserOut" EventTargetType="Range" Range="10.0" SearchIdentifier="Enemy"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_CommandBook_LaserOut>
    <AC_CommandBook_LaserIn MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/5_command/3_laserSurround" XFlip="true" Duration="2.5">
            <FrameEvent Type="SetRotateSlotValue" StartTime="0" Speed="25" Radius="5.0"/>

            <FrameEvent Type="CallAIEvent" StartTime="1.0" EventName="LaserIn" EventTargetType="Range" Range="10.0" SearchIdentifier="Enemy"/>
            <FrameEvent Type="SetRotateSlotValue" StartTime="1.6" Speed="0" Radius="5.0"/>
            <FrameEvent Type="SetRotateSlotValue" StartTime="2.0" Speed="25" Radius="5.0"/>

            <FrameEvent Type="SetRotateSlotValue" StartTime="2.1" Speed="18" Radius="2.5"/>

            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_CommandBook_LaserIn>

    <!-- 잡기: 배리어 -->
    <AC_Pray MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/6_barrior/1_pray" XFlip="true" Duration="1.5">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="1" ApplyBuff="HelenaBarriorOn"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="BarriorActivated" EventTargetType="Self"/>

            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Pray"/>
    </AC_Pray>
    <AC_Barrior MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/6_barrior/2_entry" XFlip="true" Duration="0.2">
            <!-- TODO: 캐치용 스크립트, 모션X -->
            <FrameEvent Type="Attack" StartTime="0" EndTime="0.2" AttackPreset="Aoba_Tsuba" AttackType="Catch" CatchOffset="0.1 0 0">
                <OnCatch>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CatchedSet"/>
                    
                    <FrameEvent Type="ZoomEffect" Scale="-0.4"/>
                    <FrameEvent Type="StopUpdate" Time="0.15"/>
                </OnCatch>
            </FrameEvent>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_Barrior>
    <AC_Barrior_Entry MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/6_barrior/2_entry" XFlip="true" Duration="0.3">
            <FrameEvent Type="AudioPlay" StartTime="0" ID="2411" Attach="true"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12"/>
        </Animation>

        <Branch Condition="getKey_Escape_1 || getKey_Escape_2 || End" Execute="AC_Barrior_Struggle"/>
    </AC_Barrior_Entry>
    <AC_Barrior_Struggle MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/6_barrior/3_struggle" XFlip="true" Duration="0.3">
            <FrameEvent Type="AudioPlay" StartTime="0" ID="2411" Attach="true"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12"/>
        </Animation>

        <Branch Condition="getKey_Escape_1 || getKey_Escape_2 || End" Execute="AC_Barrior_Entry"/>
    </AC_Barrior_Struggle>
    <AC_Barrior_Defense MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/6_barrior/4_attack" XFlip="true" Duration="0.5">
        <!-- 밀치기, 아카네 딜레이 0.7s-->
            <FrameEvent Type="AudioPlay" StartTime="0" ID="2412" Attach="true"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="12"/>
            <FrameEvent Type="ReleaseCatch" StartTime="0" Push="5 0 0" TargetAction="AC_AobaTsuba_Fail"/>

            <FrameEvent Type="ZoomEffect" Scale="-1.7"/>
            <FrameEvent Type="SetTimeScale" Scale="0.7" Time="0.1" BlendTime="0.1"/>
            <FrameEvent Type="ShakeEffect" Scale="0.15" Speed="35.0" Time="0.1"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_Barrior_Defense>
    <AC_Barrior_Broken MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/6_barrior/5_away" XFlip="true" Duration="0.9">
        <!-- 밀리기 -->
            <FrameEvent Type="Movement" StartTime="0" Friction="4" MaxVelocity="9" Velocity="-4" Speed="0"/>
            <FrameEvent Type="DeleteBuff" StartTime="0" BuffList="HelenaBarriorOn"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="BarriorBroken" EventTargetType="Self"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>
        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_Barrior_Broken>
    
    <AC_BarriorCounter MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" Flags="LaserEffect">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/6_barrior/6_counter/1_attackReady" XFlip="true" Duration="0.8">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="LaserToTarget" EventTargetType="Range" Range="10.0" SearchIdentifier="Enemy"/>
            <FrameEvent Type="TimelineEffect" StartTime="0" Path="Prefab/Effect/CommonBeam_TimeLine" Attach="true" AngleType="Direction" LifeTime="0.85" FollowDirection="True" AttackPreset="Helena_Laser"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
            
        </Animation>
        <Animation Preset="2_skill/6_barrior/6_counter/2_attackMain" XFlip="true" Duration="0.1">
            <FrameEvent Type="SetDirectionType" StartTime="0.0" DirectionType="Keep"/>
            <FrameEvent Type="EffectPreset" StartTime="0" Key="Helena_LaserShot"/>
            <FrameEvent Type="Attack" StartTime="0.05" EndTime="0.1" AttackPreset="Helena_Laser">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonHalfAttack"/>
                    
                    <FrameEvent Type="StopUpdate" Time="0.1"/>
                    <FrameEvent Type="SetTimeScale" Scale="0.1" Time="0.1" BlendTime="0.1"/>
                    <FrameEvent Type="ShakeEffect" Scale="0.1" Speed="10.0" Time="0.1"/>
                    
                    <FrameEvent Type="EffectPreset" StartTime="0" Key="Smash"/>
                </OnHit>
            </FrameEvent>
            <FrameEvent Type="Movement" StartTime="0.06" Friction="18" MaxVelocity="10" Velocity="-7" Speed="0"/>
        </Animation>
        <Animation Preset="2_skill/6_barrior/6_counter/3_attackRecover" XFlip="true" Duration="1.2">
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_BarriorCounter>

    <!-- 회피기 : 투명화 -->
    <AC_Disappear MovementType="GraphPreset" MovementGraphPreset="Helena_BackStep" DirectionType="AI" FlipType="Direction" DefenceType="Evade" Flags="HideBuffEffect">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/7_invisibleDodge/1_disappear" XFlip="true" Duration="0.3">
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="Detach" EventTargetType="Range" SearchIdentifier="Enemy" Range="100.0"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="DetachExplosion" EventTargetType="Range" Range="100.0" SearchIdentifier="Enemy"/> 
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Invisible"/>
    </AC_Disappear>
    <AC_Invisible MovementType="Empty" DirectionType="AI" FlipType="Direction" ActiveCollision="False" Flags="HideBuffEffect">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/7_invisibleDodge/2_invisible" XFlip="true" Duration="2.0">
            <FrameEvent Type="TeleportToTarget" StartTime="2.0" TeleportTarget="AITarget"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Appear"/>
    </AC_Invisible>
    <AC_Appear MovementType="GraphPreset" MovementGraphPreset="Helena_Appear" DirectionType="MousePoint" FlipType="Direction" ActiveCollision="True">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="2_skill/7_invisibleDodge/2_invisible" XFlip="true" Duration="0.1">
            <FrameEvent Type="SetDirectionType" StartTime="0.016" DirectionType="Keep"/>
        </Animation>
        <Animation Preset="2_skill/7_invisibleDodge/3_appear" XFlip="true" Duration="0.4">
            <FrameEvent Type="SetDirectionType" StartTime="0" DirectionType="AITarget"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_Appear>

<!-- SKill Action -->

<!-- Defense Action -->
    <AC_Dodge MovementType="GraphPreset" MovementGraphPreset="Preset_Dodge" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="1_defense/1_dodge" XFlip="true" Duration="0.7">
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_Dodge>
    
    <AC_ExplosionDodge MovementType="GraphPreset" MovementGraphPreset="Preset_Dodge" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="1_defense/1_dodge" XFlip="true" Duration="0.7">
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountClear"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="GuardCountClear"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ExplosionDodge>

    <AC_GuardBroken MovementType="FrameEvent" DirectionType="AttackedPoint" FlipType="Direction">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="1_defense/2_guardBroken" XFlip="true" Duration="1.25">
            <FrameEvent Type="AudioPlay" StartTime="0" ID="2202" Attach="true"/>
            <FrameEvent Type="Movement" StartTime="0" Friction="0" Speed="0" Velocity="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="HitCountIncrease"/>

            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_GuardBroken>
<!-- Defense Action -->

    <AIMove MovementType="GraphPreset" MovementGraphPreset="Move" DirectionType="AI" FlipType="Direction" ActiveCollision="False">
        <AnimationHeader MasterPath="gv_MasterPath"/>
        <Animation Preset="0_default/2_move" XFlip="true" Duration="1.0">
        </Animation>

        <Branch Condition="End == true" Execute="AIMove"/>
    </AIMove>

</ActionGraph>