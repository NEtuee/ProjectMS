
<ActionGraph Name="TestZako" DefaultAction="Idle" DefaultFramePerSecond="0.5">

    <Idle DirectionType="Keep" FlipType="Direction" DefenceType="Guard" DefenceAngle="360.0" DefenceDirectionType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/Idle/" StartFrame="0" EndFrame="1" FramePerSecond="0.5" XFlip="true">
        </Animation>

        <Branch Condition="Catched" Execute="Catched"/>
        <Branch Condition="End == true" Execute="Idle"/>
        <Branch Condition="GuardBroken" Execute="GuardBroken"/>
    </Idle>

    <GuardBroken DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/JustGuardBreak/" StartFrame="0" EndFrame="1" XFlip="true">
        </Animation>

        <Branch Condition="Catched" Execute="Catched"/>
        <Branch Condition="GuardBroken" Execute="GuardBroken"/>
        <Branch Condition="End == true" Execute="Idle"/>
    </GuardBroken>

    <Catched DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/JustGuardBreak/" StartFrame="0" EndFrame="1" XFlip="true">
        </Animation>

        <Branch Condition="IsCatchTarget == false" Execute="Idle"/>
        <Branch Condition="End == true" Execute="Catched"/>
    </Catched>

    <Dead DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/dash/" StartFrame="0" EndFrame="1" XFlip="true">
            <FrameEvent Type="Effect" StartFrame="0" Path="Resources/Sprites/DummyPlayer/dead/" FramePerSecond="0.2" CastShadow="True">
                <Physics UseGravity="True" Velocity="Random_-2.5^2.5 Random_1.5^3.5" Friction="1" Torque="Random_-30^30" AngularFriction="10.0"/>
            </FrameEvent>

            <FrameEvent Type="KillEntity" StartFrame="0"/>
        </Animation>

        <Branch Condition="End == true" Execute="Dead"/>
    </Dead>








<!-- 레이저 쏘기 테스트 -->
    <TEST_LaserLong_Start DirectionType="AI" FlipType="Direction"  Flags="LaserEffect">
        <Animation Preset="Sprites/DummyPlayer/idle/" Duration="1.0" XFlip="true">
            <FrameEvent Type="TimelineEffect" StartTime="0" 
                Path="Prefab/Effect/CommonBeam_TimeLine" 
                Attach="true" 
                AngleType="Direction" 
                LifeTime="1.0" 
                FollowDirection="True" 
                AttackPreset="Luger_Normal"/>
        </Animation>

        <Branch Condition="End == true" Execute="TEST_LaserLong_Shot"/>
    </TEST_LaserLong_Start>

    <TEST_LaserLong_Shot DirectionType="AI" FlipType="Direction" Flags="LaserEffect">
        <Animation Preset="Sprites/DummyPlayer/idle/" Duration="5.0" XFlip="true">
            <FrameEvent Type="Attack" StartTime="0.3" EndTime="5.0" AttackPreset="Luger_Normal" AttackTerm="0.2">
                <OnHit>
                    <FrameEvent Type="AudioPlay" StartTime="0" ID="2205" Attach="true"/>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonHalfAttack"/>
                    
                    <FrameEvent Type="StopUpdate" Time="0.1"/>
                    <FrameEvent Type="SetTimeScale" Scale="0.1" Time="0.1" BlendTime="0.1"/>
                    <FrameEvent Type="ShakeEffect" Scale="0.1" Speed="10.0" Time="0.1"/>
                    
                    <!-- visual -->
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>
            </FrameEvent>
            <FrameEvent Type="EffectPreset" StartTime="0" Key="LaserLoopFollow"/>
        </Animation>

        <Branch Condition="End == true" Execute="Idle"/>
    </TEST_LaserLong_Shot>
<!-- ================================================================ -->
    
    
    

</ActionGraph>