

<ActionGraph Name="Test" DefaultAction="Idle" DefaultFramePerSecond="0.5">

    <BranchSet Name="CommonHitAction">
        <Branch Condition="Hit == true" Execute="Hit"/>
    </BranchSet>

    <Idle DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/Idle/" StartFrame="0" EndFrame="1" XFlip="true">
        </Animation>

        <UseBranchSet Name="CommonHitAction"/>

        <Branch Condition="End == true" Execute="Guard"/>
    </Idle>

    <Guard DefenceType="Guard" DefenceAngle="180.0" DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/Guard/" StartFrame="0" EndFrame="1" XFlip="true">
        </Animation>

        <UseBranchSet Name="CommonHitAction"/>

        <Branch Condition="DefenceSuccess == true" Execute="GuardSuccess"/>
        <Branch Condition="End == true" Execute="Parry"/>
    </Guard>

    <Parry DefenceType="Parry" DefenceAngle="140.0" DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/Guard/" StartFrame="0" EndFrame="1" XFlip="true">
        </Animation>

        <UseBranchSet Name="CommonHitAction"/>

        <Branch Condition="ParrySuccess == true" Execute="ParrySuccess"/>
        <Branch Condition="End == true" Execute="Idle"/>
    </Parry>

    <GuardSuccess DefenceType="Guard" DefenceAngle="180.0" MovementType="GraphPreset" MovementGraphPreset="GuardSuccess" DirectionType="AttackedPoint" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/Guard/" StartFrame="0" EndFrame="1" FramePerSecond="2" XFlip="true">
            <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/ParrySucc/" StartFrame="0" FramePerSecond="12" Offset="0.1 0.0 0.0"/>
        </Animation>

        <UseBranchSet Name="CommonHitAction"/>

        <Branch Condition="DefenceSuccess == true" Execute="GuardSuccess"/>
        <Branch Condition="End == true" Execute="Guard"/>
    </GuardSuccess>

    <ParrySuccess DefenceType="Parry" DefenceAngle="140.0" MovementType="GraphPreset" MovementGraphPreset="GuardSuccess" DirectionType="AttackedPoint" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/Parry/" StartFrame="0" EndFrame="1" FramePerSecond="2" XFlip="true">
            <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/ParrySucc/" StartFrame="0" FramePerSecond="12" Offset="0.1 0.0 0.0"/>
        </Animation>

        <UseBranchSet Name="CommonHitAction"/>

        <Branch Condition="ParrySuccess == true" Execute="ParrySuccess"/>
        <Branch Condition="End == true" Execute="Parry"/>
    </ParrySuccess>

    <Hit MovementType="GraphPreset" MovementGraphPreset="AttackHit" DirectionType="AttackedPoint" FlipType="Direction">
        <Animation Path="Resources/Sprites/DummyPlayer/Hit/" StartFrame="0" EndFrame="1" FramePerSecond="2" XFlip="true">
        </Animation>

        <UseBranchSet Name="CommonHitAction"/>

        <Branch Condition="End == true" Execute="Idle"/>
    </Hit>

    <MoveAll MovementType="GraphPreset" MovementGraphPreset="Move" DirectionType="AI" FlipType="Direction" NormalizedSpeed="true">
        <Animation Path="Resources/Sprites/DummyPlayer/MoveForward/" StartFrame="0" EndFrame="5" FramePerSecond="12" XFlip="true">
            <MultiSelectAnimation Path="Resources/Sprites/Player/moveUp/" Condition="(AngleDirection >= 45.0) && (AngleDirection < 135.0)"/>
            <MultiSelectAnimation Path="Resources/Sprites/Player/moveDown/" Condition="(AngleDirection >= 225.0) && (AngleDirection < 315.0)"/>
            <MultiSelectAnimation Path="Resources/Sprites/Player/moveBack/" Condition="(AngleDirection >= 315.0) || (AngleDirection < 45.0) && (IsXFlip == true)"/>
            <MultiSelectAnimation Path="Resources/Sprites/Player/moveFront/" Condition="(AngleDirection >= 135.0) && (AngleDirection < 225.0) && (IsXFlip == true)"/>
            <MultiSelectAnimation Path="Resources/Sprites/Player/moveBack/" Condition="(AngleDirection >= 135.0) && (AngleDirection < 225.0) && (IsXFlip == false)"/>
            <MultiSelectAnimation Path="Resources/Sprites/Player/moveFront/" Condition="(AngleDirection >= 315.0) || (AngleDirection < 45.0) && (IsXFlip == false)"/>
        </Animation>

        <Branch Condition="End == true" Execute="MoveAll"/>
    </MoveAll>


</ActionGraph>