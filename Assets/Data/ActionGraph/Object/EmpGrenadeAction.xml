<ActionGraph Name="EmpGrenadeAction" DefaultAction="Move" DefaultFramePerSecond="12">

    <Move MovementType="GraphPreset" MovementGraphPreset="Aoba_EmpGrenade" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <!-- TODO: EMP 폭발 도달 속도 플레이 해보고 조절할 것 -->
        <Animation Preset="Sprites/Projectile/EmpGrenade" XFlip="true" Duration="1.0">
        </Animation>

        <Branch Condition="Hit" Execute="Destroy"/>
        <Branch Condition="End" Execute="Explosion"/>
    </Move>

    <Explosion MovementType="Empty" DirectionType="Keep" DefenceType="Evade" DefenceAngle="360">
        <Animation Preset="Sprites/Projectile/empty" Duration="0.3">
            <!-- TODO: 폭발 이펙트  -->
            <FrameEvent Type="Attack" StartTime="0" EndTime="0.3" AttackPreset="Aoba_EmpGrenade">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonHalfAttack"/>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="StunSet"/>
                </OnHit>
            </FrameEvent>
        </Animation>
        <Branch Condition="End" Execute="Destroy"/>
    </Explosion>

    <Destroy MovementType="Empty" DirectionType="Keep">
        <Animation Preset="Sprites/Projectile/empty" Duration="0.016">
            <FrameEvent Type="KillEntity" StartFrame="0"/>
        </Animation>

        <Branch Condition="End" Execute="Destroy"/>
    </Destroy>

</ActionGraph>