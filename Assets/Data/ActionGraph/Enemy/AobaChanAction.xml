<ActionGraph Name="AobaChanAction" DefaultAction="AC_Idle" DefaultFramePerSecond="12" DefaultBuff="NajimiBattleDecrementKeep">

    <AC_Entry MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="1_idle" XFlip="true" Duration="1">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Entry"/>
    </AC_Entry>

    <AC_Idle MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="1_idle" XFlip="true" Duration="1">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>

            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="ResetRaisen" EventTargetType="Self"/>            
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_Idle>

    <AC_Move MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="2_move" XFlip="true" Duration="0.5">
            <FrameEvent Type="Movement" StartTime="0" Friction="0" MaxVelocity="5" Speed="15"/>

            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Move"/>
    </AC_Move>

    <AC_SystemChase MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="2_move" XFlip="true" Duration="0.1">
            <FrameEvent Type="Movement" StartTime="0" Friction="0" MaxVelocity="20" Speed="40"/>

        </Animation>

        <Branch Condition="End == true" Execute="AC_SystemChase"/>
    </AC_SystemChase>
    
    <AC_Dash MovementType="GraphPreset" MovementGraphPreset="Aoba_Dash" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="3_dash" XFlip="true" Duration="0.7">
            <FrameEvent Type="Test" Log="HitCount 2" Condition="getStat_HitCount == 2.0"/>
            <FrameEvent Type="Test" Log="HitCount 3" Condition="getStat_HitCount == 3.0"/>
            <FrameEvent Type="Test" Log="HitCount 4" Condition="getStat_HitCount == 4.0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="BossHitCountClear"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Dash"/>
    </AC_Dash>

    <AC_Dodge MovementType="GraphPreset" MovementGraphPreset="Aoba_Dodge" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="6_dodge" XFlip="true" Duration="0.7">
            <FrameEvent Type="Test" Log="HitCount 2" Condition="getStat_HitCount == 2.0"/>
            <FrameEvent Type="Test" Log="HitCount 3" Condition="getStat_HitCount == 3.0"/>
            <FrameEvent Type="Test" Log="HitCount 4" Condition="getStat_HitCount == 4.0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="BossHitCountClear"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Dodge"/>
    </AC_Dodge>

    <AC_Hit MovementType="FrameEvent" DirectionType="AttackedPoint" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="4_hit" XFlip="true" Duration="1.25">
            <FrameEvent Type="Movement" StartTime="0" Friction="0" Speed="0" Velocity="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="BossHitCountIncrease"/>
            <FrameEvent Type="ZoomEffect" Scale="2.8"/>
            <FrameEvent Type="StopUpdate" Time="0.15"/>

            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_Hit>

    <AC_GuardBroken MovementType="FrameEvent" DirectionType="AttackedPoint" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="4_hit" XFlip="true" Duration="1.25">
            <FrameEvent Type="Movement" StartTime="0" Friction="0" Speed="0" Velocity="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="BossHitCountIncrease"/>
            <FrameEvent Type="ZoomEffect" Scale="2.8"/>
            <FrameEvent Type="StopUpdate" Time="0.15"/>
            
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_GuardBroken>

    <AC_Groggy MovementType="FrameEvent" DirectionType="AttackedPoint" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="4_hit" XFlip="true" Duration="1.25">
            <FrameEvent Type="Movement" StartTime="0" Friction="0" Speed="0" Velocity="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="BattleClear"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="Groggy"/>

            <FrameEvent Type="ZoomEffect" Scale="2.8"/>
            <FrameEvent Type="StopUpdate" Time="0.15"/>
        </Animation>

        <Branch Condition="End == true" Execute="AC_Idle"/>
    </AC_Groggy>
    
    <Dead DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/0_default/"/>
        <Animation Preset="5_dead" XFlip="true" Duration="1">
        </Animation>

        <Branch Condition="End == true" Execute="Dead"/>
    </Dead>

    <AC_RushReady MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/KantoReito/1_punch/"/>
        <Animation Preset="1_punchReady" XFlip="true" Duration="0.7">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="BossHitCountClear"/>
        </Animation>
    
        <Branch Condition="End" Execute="AC_RushReady"/>
    </AC_RushReady>
    
    <AC_Rush MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/7_ElectronicShock/"/>
        <Animation Preset="1_rushToCatch" XFlip="true" Duration="0.35">
            <FrameEvent Type="Movement" StartTime="0" Friction="24" MaxVelocity="12" Velocity="12" Speed="0"/>
            <FrameEvent Type="Attack" StartTime="0" EndTime="0.2" AttackPreset="Najimi_Rush" AttackType="Catch" CatchOffset="0.1 0 0">
                <OnCatch>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CatchedSet"/>
                    
                    <FrameEvent Type="ZoomEffect" Scale="2.8"/>
                    <FrameEvent Type="StopUpdate" Time="0.15"/>
                </OnCatch>
            </FrameEvent>
        </Animation>
        <Animation Preset="2_catchFailed" XFlip="true" Duration="0.65">
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_Rush>

    <AC_RushSuccess_Entry MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/7_ElectronicShock/"/>
        <Animation Preset="3_catched" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12"/>
        </Animation>

        <Branch Condition="getKey_Escape_1 || getKey_Escape_2" Execute="AC_RushSuccess_Struggle"/>
    </AC_RushSuccess_Entry>

    <AC_RushSuccess_Struggle MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/7_ElectronicShock/"/>
        <Animation Preset="4_struggle" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12"/>
        </Animation>

        <Branch Condition="getKey_Escape_1 || getKey_Escape_2" Execute="AC_RushSuccess_Entry"/>
    </AC_RushSuccess_Struggle>

    <AC_RushSuccess_Shock MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/7_ElectronicShock/"/>
        <Animation Preset="5_electronicShock" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndTime="999" Tag="Hold"/>
            <FrameEvent Type="Attack" StartTime="0" AttackPreset="Aoba_ElectronicShock">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonAttack"/>
                    <FrameEvent Type="ZoomEffect" Scale="2.8"/>
                </OnHit>
            </FrameEvent>

            <FrameEvent Type="ReleaseCatch" StartTime="1" Push="2 0 0"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_RushSuccess_Shock>

    <AC_Away MovementType="FrameEvent" DirectionType="Keep" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/7_ElectronicShock/"/>
        <Animation Preset="6_away" XFlip="true" Duration="1.0">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Velocity="-9" Speed="0"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>
        <Animation Preset="7_recover" XFlip="true" Duration="1.0">
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_Away>

    <!-- 뢰섬 -->
    <AC_RaisenReady MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/"/>
        <Animation Preset="1_raisenReady" XFlip="true" Duration="0.5">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="TimelineEffect" StartTime="0.35" Path="Prefab/Effect/MaterialAttackPre_Timeline" Offset="0.0 0.0 0.0" Attach="true"/>
        </Animation>

        <Branch Condition="End" Execute="AC_RaisenReady"/>
    </AC_RaisenReady>

    <AC_RaisenPre MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/2_raisen/"/>
        <Animation Preset="1_raisenPre" XFlip="true" Duration="0.1">

            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="CountRaisen" EventTargetType="Self"/>
        </Animation>

        <Branch Condition="End" Execute="AC_RaisenPre"/>
    </AC_RaisenPre>

    <AC_RaisenSlash MovementType="GraphPreset" MovementGraphPreset="Aoba_Raisen" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/2_raisen/"/>
        <Animation Preset="2_raisenMain" XFlip="true" Duration="0.8">
            <FrameEvent Type="Attack" StartTime="0" AttackPreset="Aoba_Raisen">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonAttack"/>

                    <FrameEvent Type="ParticleEffect" Path="Prefab/Effect/Slash" Offset="0.0 0.0 0.0" ToTarget="true" AngleType="AttackPoint"/>
                    <FrameEvent Type="ParticleEffect" Path="Prefab/Effect/Blood" Offset="0.0 0.0 0.0" ToTarget="true" AngleType="AttackPoint"/>
                    
                    <FrameEvent Type="TeleportToTargetBack" DistanceOffset="1.0"/>

                    <FrameEvent Type="StopUpdate" Time="0.07"/>
                    <FrameEvent Type="SetTimeScale" Scale="0.2" Time="0.2" BlendTime="0.2"/>
                    <FrameEvent Type="ShakeEffect" Scale="0.15" Speed="35.0" Time="0.2"/>

                    <FrameEvent Type="StopUpdate" Time="0.07"/>
                </OnHit>
            </FrameEvent>
            
            <FrameEvent Type="FrameTag" StartTime="0.2" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0.2" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_RaisenSlash>

    <AC_RaisenSuccess MovementType="FrameEvent" DirectionType="Keep" RotationType="Direction" FlipType="Direction" DirectionUpdateOnce="true">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/"/>
        <Animation Preset="3_raisenSuccess" XFlip="true" ScalePreset="YSpring" Duration="0.88">
            <FrameEvent Type="Movement" StartTime="0" Friction="15" MaxVelocity="6.5" Velocity="6.5" Speed="0"/>

            <FrameEvent Type="FrameTag" StartTime="0.4" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0.4" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_RaisenSuccess>

    <!-- 초뢰섬 -->
    <AC_ChoraisenReady MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/3_choraisen/"/>
        <Animation Preset="1_raisenReady" XFlip="true" Duration="0.5">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="CountRaisen" EventTargetType="Self"/>
            <!-- TODO -->
            <!-- <FrameEvent Type="TimelineEffect" Path="Prefab/Effect/AobaChoraisen_TimeLine" Attach="true" AngleType="Direction" LifeTime="0.9" FollowDirection="True"/>-->

            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_ChoraisenReady"/>
    </AC_ChoraisenReady>

    <AC_ChoraisenReadyUp MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/3_choraisen/"/>
        <Animation Preset="1_raisenReady" XFlip="true" Duration="0.7">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="CountRaisen" EventTargetType="Self"/>

            <!-- TODO -->
            <!-- <FrameEvent Type="TimelineEffect" Path="Prefab/Effect/AobaChoraisen_TimeLine" Attach="true" AngleType="Direction" LifeTime="1.2" FollowDirection="True"/> -->

            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_ChoraisenReadyUp"/>
    </AC_ChoraisenReadyUp>

    <AC_ChoraisenPre MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/2_raisen/"/>
        <Animation Preset="1_raisenPre" XFlip="true" Duration="0.1">
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_RaisenPre"/>
    </AC_ChoraisenPre>

    <AC_ChoraisenSlash MovementType="GraphPreset" MovementGraphPreset="Aoba_Choraisen" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/3_choraisen/2_raisen/"/>

        <Animation Preset="2_raisenMain" XFlip="true" Duration="0.8">
            <FrameEvent Type="Attack" StartTime="0" AttackPreset="Aoba_Choraisen">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonAttack"/>
                    
                    <FrameEvent Type="CallAIEvent" StartTime="0" EventName="ResetRaisen" EventTargetType="Self"/>

                    <FrameEvent Type="ParticleEffect" Path="Prefab/Effect/Blood" Offset="0.0 0.0 0.0" ToTarget="true" AngleType="AttackPoint"/>
                    <FrameEvent Type="ParticleEffect" Path="Prefab/Effect/Impact" Offset="0.0 0.0 0.0" Attach="true" ToTarget="true" AngleType="AttackPoint"/>
                    
                    <FrameEvent Type="TeleportToTargetBack" DistanceOffset="1.0"/>

                    <FrameEvent Type="StopUpdate" Time="0.07"/>
                    <FrameEvent Type="SetTimeScale" Scale="0.2" Time="0.2" BlendTime="0.2"/>
                    <FrameEvent Type="ShakeEffect" Scale="0.15" Speed="35.0" Time="0.2"/>
                </OnHit>
            </FrameEvent>

        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_ChoraisenSlash>

    <AC_ChoraisenSuccess MovementType="FrameEvent" DirectionType="Keep" RotationType="Direction" FlipType="Direction" DirectionUpdateOnce="true">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/3_choraisen/"/>
        <Animation Preset="3_raisenSuccess" XFlip="true" ScalePreset="YSpring" Duration="0.88">
            <FrameEvent Type="Movement" StartTime="0" Friction="90" MaxVelocity="20" Speed="0"/>
            
            <FrameEvent Type="FrameTag" StartTime="0.4" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0.4" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_ChoraisenSuccess>

    <!-- 약진 뢰섬 -->
    <AC_ChargeRaisenReady MovementType="GraphPreset" MovementGraphPreset="Aoba_Charge" DirectionType="AI" FlipType="Direction">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/3_choraisen/"/>
        <Animation Preset="1_raisenReady" XFlip="true" Duration="0.7">

            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_ChargeRaisenReady"/>
    </AC_ChargeRaisenReady>

    <AC_ChargeRaisenPre MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/2_raisen/"/>
        <Animation Preset="1_raisenPre" XFlip="true" Duration="0.12">
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_ChargeRaisenPre"/>
    </AC_ChargeRaisenPre>

    <AC_ChargeRaisenSlash MovementType="GraphPreset" MovementGraphPreset="Aoba_Raisen" DirectionType="AI" FlipType="Direction">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/2_raisen/"/>
        <Animation Preset="2_raisenMain" XFlip="true" Duration="0.8">
            <FrameEvent Type="Attack" StartTime="0" AttackPreset="Aoba_Raisen">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonAttack"/>

                    <FrameEvent Type="ParticleEffect" Path="Prefab/Effect/Slash" Offset="0.0 0.0 0.0" ToTarget="true" AngleType="AttackPoint"/>
                    <FrameEvent Type="ParticleEffect" Path="Prefab/Effect/Blood" Offset="0.0 0.0 0.0" ToTarget="true" AngleType="AttackPoint"/>
                    
                    <FrameEvent Type="TeleportToTargetBack" DistanceOffset="0.4"/>

                    <FrameEvent Type="StopUpdate" Time="0.07"/>
                </OnHit>
            </FrameEvent>
            <FrameEvent Type="FrameTag" StartTime="0.2" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0.2" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_ChargeRaisenSlash>

    <AC_ChargeRaisenSuccess MovementType="FrameEvent" DirectionType="Keep" RotationType="Direction" FlipType="Direction" DirectionUpdateOnce="true">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/"/>
        <Animation Preset="3_raisenSuccess" XFlip="true" ScalePreset="YSpring" Duration="0.88">
            <FrameEvent Type="Movement" StartTime="0" Friction="90" MaxVelocity="20" Speed="0"/>
            
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="ChargeRaisenSuccess" EventTargetType="Self"/>
            <FrameEvent Type="FrameTag" StartTime="0.4" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0.4" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_ChargeRaisenSuccess>

    <!-- 부동 뢰섬 -->
    <AC_UnwaverRaisen MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/"/>
        <!-- 준비 자세 -->
        <Animation Preset="1_raisenReady" XFlip="true" Duration="0.5">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            <!-- 약진 뢰섬 연속 공격 완료 체크 -->
            <FrameEvent Type="CallAIEvent" StartTime="0" EventName="ChargeRaisenClear" EventTargetType="Self"/>
            <FrameEvent Type="TimelineEffect" StartTime="0.35" Path="Prefab/Effect/MaterialAttackPre_Timeline" Offset="0.0 0.0 0.0" Attach="true"/>
        </Animation>
        <!-- 영역 전개 -->
        <Animation Preset="2_raisen/1_raisenPre" XFlip="true" Duration="1.0">
            <FrameEvent Type="Attack" StartTime="0" EndTime="0.4" AttackPreset="Aoba_UnwaverRaisen">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonAttack"/>

                    <FrameEvent Type="ParticleEffect" Path="Prefab/Effect/Slash" Offset="0.0 0.0 0.0" ToTarget="true" AngleType="AttackPoint"/>
                    <FrameEvent Type="ParticleEffect" Path="Prefab/Effect/Blood" Offset="0.0 0.0 0.0" ToTarget="true" AngleType="AttackPoint"/>
                    
                    <FrameEvent Type="TeleportToTargetBack" DistanceOffset="0.4"/>

                    <FrameEvent Type="StopUpdate" Time="0.07"/>
                </OnHit>
            </FrameEvent>
            
        </Animation>
        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_UnwaverRaisen>

    <AC_UnwaverRaisenSuccess MovementType="FrameEvent" DirectionType="Keep" RotationType="Direction" FlipType="Direction" DirectionUpdateOnce="true">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/"/>
        <Animation Preset="3_raisenSuccess" XFlip="true" ScalePreset="YSpring" Duration="0.88">
            <FrameEvent Type="Movement" StartTime="0" Friction="90" MaxVelocity="20" Speed="0"/>
            
            <FrameEvent Type="FrameTag" StartTime="0.4" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0.4" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_UnwaverRaisenSuccess>

    <!-- 스턴건 -->
    <AC_HandgunReady MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/2_handgun/"/>
        <Animation Preset="1_handgunReady" XFlip="true" Duration="0.4">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
            
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_HandgunReady"/>
    </AC_HandgunReady>

    <AC_HandgunShot MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/2_handgun/"/>
        <Animation Preset="2_handgunPre" XFlip="true" Duration="0.15">
        </Animation>
        <Animation Preset="3_handgunShot" XFlip="true" Duration="1.0">
            <FrameEvent Type="Danmaku" StartTime="0" Path="Enemy/MuzzleFlash.xml" Offset="0.4 0.1 0" UseFlip="True"/>
            <FrameEvent Type="Attack" StartTime="0" AttackPreset="Aoba_Stungun">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonAttack"/>
                </OnHit>
            </FrameEvent>
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="3" Velocity="-8" Speed="0"/>

            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_HandgunShot>

    <!-- EMP -->
    <AC_EmpThrow MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/4_emp/"/>
        <Animation Preset="1_empReady" XFlip="true" Duration="0.2">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Speed="0"/>
        </Animation>
        <Animation Preset="2_empThrow" XFlip="true" Duration="1.0">
            <FrameEvent Type="SpawnCharacter" StartTime="0" CharacterKey="EmpGrenade" Offset="0 0 0" SearchIdentifier="Projectile" UseFlip="True"/>

            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>
    
        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_EmpThrow>

    <!-- 전격 방출 -->
    <AC_Discharge MovementType="FrameEvent" DirectionType="AI" FlipType="Direction">
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/9_discharge/"/>
        <Animation Preset="1_dischargeReady" XFlip="true" Duration="0.5">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" Speed="0"/>
            <FrameEvent Type="ApplyBuff" StartTime="0" ApplyBuff="BossHitCountClear"/>
        </Animation>
        <Animation Preset="2_dischargeMain" XFlip="true" Duration="0.3">
            <FrameEvent Type="Attack" StartTime="0" EndTime="0.3" AttackPreset="Aoba_Discharge">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="CommonAttack"/>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="StunSet"/>
                </OnHit>
            </FrameEvent>
        </Animation>
        <Animation Preset="3_dischargeRecovery" XFlip="true" Duration="0.2">
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>
    
        <Branch Condition="End" Execute="AC_RushReady"/>
    </AC_Discharge>
    
    <!-- 신속 이동 -->
    <AC_Warp MovementType="FrameEvent" DirectionType="AI" FlipType="Direction" RotationType="Direction">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/3_choraisen/2_raisen/"/>
        <Animation Preset="2_raisenMain" XFlip="true" Duration="0.1">
            <FrameEvent Type="Attack" StartTime="0" AttackPreset="Aoba_Choraisen">
                <OnHit>
                    <FrameEvent Type="TeleportToTargetBack" DistanceOffset="2.0"/>
                    <FrameEvent Type="StopUpdate" Time="0.07"/>
                </OnHit>
                
            </FrameEvent>
        </Animation>
        <Branch Condition="End" Execute="AC_Idle"/>
    </AC_Warp>

    <AC_Warpped MovementType="FrameEvent" DirectionType="AI" RotationType="Direction" FlipType="Direction">
        <!-- TODO -->
        <AnimationHeader MasterPath="Sprites/Enemy/NozawaAoba/1_raisen/"/>
        <Animation Preset="3_raisenSuccess" XFlip="true" ScalePreset="YSpring" Duration="0.2">
            <FrameEvent Type="Movement" StartTime="0" Friction="12" MaxVelocity="0" Velocity="-3" Speed="0"/>
            
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="HitAvail"/>
            <FrameEvent Type="FrameTag" StartTime="0" EndFrame="999" Tag="GbAvail"/>
        </Animation>

        <Branch Condition="End" Execute="AC_Entry"/>
    </AC_Warpped>

</ActionGraph>