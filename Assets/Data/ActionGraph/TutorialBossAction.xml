

<ActionGraph Name="TutorialBoss" DefaultAction="MOV_Idle" DefaultFramePerSecond="0.5" DefaultBuff="8">
    
    <BranchSet Name="CommonHitAction">
        <Branch Condition="Hit == true" Execute="STA_Hit"/>
    </BranchSet>

    <MOV_Idle DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Idle/" StartFrame="0" EndFrame="1" XFlip="true">
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </MOV_Idle>

    <JDG_Idle DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Idle/" StartFrame="0" EndFrame="1" XFlip="true">
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </JDG_Idle>

    <END_Dead DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Idle/" StartFrame="0" EndFrame="1" XFlip="true">
        </Animation>
        <Branch Condition="End == true" Execute="END_Dead"/>
    </END_Dead>
    
    <MOV_Normal MovementType="GraphPreset" MovementGraphPreset="Move" DirectionType="AI" FlipType="Direction" NormalizedSpeed="true" DefenceType="Evade" DefenceAngle="360.0" MoveScale="0.8">
        <Animation Path="Resources/Sprites/SampleBoss/MoveForward/" StartFrame="0" EndFrame="1" FramePerSecond="12" XFlip="true">
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/MoveUp/" Condition="(AngleDirection >= 45.0) && (AngleDirection < 135.0)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/MoveDown/" Condition="(AngleDirection >= 225.0) && (AngleDirection < 315.0)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/MoveBack/" Condition="(AngleDirection >= 315.0) || (AngleDirection < 45.0) && (IsXFlip == true)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/MoveForward/" Condition="(AngleDirection >= 135.0) && (AngleDirection < 225.0) && (IsXFlip == true)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/MoveBack/" Condition="(AngleDirection >= 135.0) && (AngleDirection < 225.0) && (IsXFlip == false)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/MoveForward/" Condition="(AngleDirection >= 315.0) || (AngleDirection < 45.0) && (IsXFlip == false)"/>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Normal"/>
    </MOV_Normal>

    <MOV_Dash MovementType="GraphPreset" MovementGraphPreset="Dash" DirectionType="AI" FlipType="Direction" RotationType="Direction" DefenceType="Evade" DefenceAngle="360.0">
        <Animation Path="Resources/Sprites/SampleBoss/DashRight/" StartFrame="0" EndFrame="1" FramePerSecond="3" XFlip="true">
            <FrameEvent Type="ApplyBuff" ApplyBuff="9" StartFrame="0.0"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/DashUp/" Condition="(AngleDirection >= 45.0) && (AngleDirection < 135.0)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/DashDown/" Condition="(AngleDirection >= 225.0) && (AngleDirection < 315.0)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/DashLeft/" Condition="(AngleDirection >= 315.0) || (AngleDirection < 45.0) && (IsXFlip == true)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/DashRight/" Condition="(AngleDirection >= 135.0) && (AngleDirection < 225.0) && (IsXFlip == true)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/DashLeft/" Condition="(AngleDirection >= 135.0) && (AngleDirection < 225.0) && (IsXFlip == false)"/>
            <MultiSelectAnimation Path="Resources/Sprites/SampleBoss/DashRight/" Condition="(AngleDirection >= 315.0) || (AngleDirection < 45.0) && (IsXFlip == false)"/>
        </Animation>
        
        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </MOV_Dash>

    <AttackCharge DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Charge/" StartFrame="0" EndFrame="1" FramePerSecond="4">
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </AttackCharge>

    <FarAttackCharge DirectionType="Keep" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Charge/" StartFrame="0" EndFrame="3" FramePerSecond="1">
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </FarAttackCharge>

    <AttackPrepare MovementType="Empty" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="999">
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>

    </AttackPrepare>

    <ATK_C_Thrust MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="14"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </ATK_C_Thrust>

    <ATK_C_Swing MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="14"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </ATK_C_Swing>

    <ATK_N_Shove MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </ATK_N_Shove>

    <ATK_N_Windmill MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="14"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </ATK_N_Windmill>

    <ATK_F_ChargeAttack MovementType="GraphPreset" MovementGraphPreset="SampleBossAttack" DirectionType="Keep" FlipType="Keep">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_F_ChargeAttack" IgnoreDefenceType="Guard">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="14"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </ATK_F_ChargeAttack>
    
    <SHT_N_DefenseShot MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </SHT_N_DefenseShot>

    <SHT_N_CaseShot DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Danmaku" StartFrame="0" Path="TutorialBoss/SHT_N_CaseShot.xml"/>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </SHT_N_CaseShot>

    <SHT_C_GatlingShot MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </SHT_C_GatlingShot>

    <SHT_C_Tornado2Way MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </SHT_C_Tornado2Way>

    <SHT_C_Tornado4Way MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </SHT_C_Tornado4Way>
    
    <SHT_F_ThrowSpear MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </SHT_F_ThrowSpear>

    <SHT_F_ChargeThrowSpear MovementType="GraphPreset" MovementGraphPreset="Attack" DirectionType="AI" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Attack/" StartFrame="0" EndFrame="1" FramePerSecond="3">
            <FrameEvent Type="Attack" StartFrame="0" AttackPreset="ATK_C_Thrust">
                <OnHit>
                    <FrameEvent Type="ApplyBuffTarget" ApplyBuff="1"/>
                    <FrameEvent Type="Effect" Path="Resources/Sprites/Effect/AttackHit" FramePerSecond="18.0" Offset="0.0 0.0 0.0" Angle="Random_0^360" ToTarget="true"/>
                </OnHit>

                <OnGuard>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnGuard>

                <OnParry>
                    <FrameEvent Type="TeleportToTarget"/>
                </OnParry>

            </FrameEvent>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </SHT_F_ChargeThrowSpear>

    <DEF_C_Guard DirectionType="AI" DefenceDirectionType="Direction" FlipType="Keep" DefenceType="Guard" DefenceAngle="180.0">
        <Animation Path="Resources/Sprites/SampleBoss/Guard/" StartFrame="0" EndFrame="1" FramePerSecond="1" XFlip="true">
            <FrameEvent Type="SetDefenceType" StartFrame="0" DefenceType="Guard"/>
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </DEF_C_Guard>

    <STA_GuardBroken MovementType="GraphPreset" MovementGraphPreset="AttackGuarded" DirectionType="AI" FlipType="Keep">
        <Animation Path="Resources/Sprites/SampleBoss/GuardBroken/" StartFrame="0" EndFrame="1" FramePerSecond="1"/>
        

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </STA_GuardBroken>
    
    <STA_Guarded MovementType="GraphPreset" MovementGraphPreset="AttackGuarded" DirectionType="Keep" FlipType="Keep">
        <Animation Path="Resources/Sprites/SampleBoss/GuardBroken/" StartFrame="0" EndFrame="1" FramePerSecond="3">
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </STA_Guarded>

    <STA_Parried MovementType="GraphPreset" MovementGraphPreset="AttackGuarded" DirectionType="Keep" FlipType="Keep">
        <Animation Path="Resources/Sprites/SampleBoss/GuardBroken/" StartFrame="0" EndFrame="1" FramePerSecond="0.3">
        </Animation>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </STA_Parried>

    <STA_Hit MovementType="GraphPreset" MovementGraphPreset="AttackHit" DirectionType="AttackedPoint" FlipType="Direction">
        <Animation Path="Resources/Sprites/SampleBoss/Hit/" StartFrame="0" EndFrame="1" FramePerSecond="1" XFlip="true">
        </Animation>

        <UseBranchSet Name="CommonHitAction"/>

        <Branch Condition="End == true" Execute="MOV_Idle"/>
    </STA_Hit>
</ActionGraph>