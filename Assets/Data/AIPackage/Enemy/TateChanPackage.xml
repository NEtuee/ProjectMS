
<AIPackage Name="TateChanPackage" DefaultState="AI_Entry">

    <GlobalVariable Name="gv_TargetSearchRange" Value="10.0"/>
    
    <GlobalVariable Name="gv_guardOnDistance" Value="2.0"/>
    <GlobalVariable Name="gv_guardOffDistance" Value="3.0"/>

    <AIState>
        <AI_Entry UpdateTime="0.0" TargetSearchType="Near" TargetSearchRange="gv_TargetSearchRange" SearchIdentifier="Player">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="AC_Idle"/>
            </Event_OnExecute>

            <Branch Condition="TargetDistance <= gv_guardOnDistance" Execute="AI_Guard"/>
        </AI_Entry>

        <AI_MoveAll UpdateTime="0.8">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="AC_MoveAll"/>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnExecute>
        
            <Event_OnUpdate>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnUpdate>
        
            <Branch Condition="TargetExists == false" Execute="AI_Entry"/>
            
        </AI_MoveAll>

        <AI_Guard UpdateTime="0.0" TargetSearchType="Near" TargetSearchRange="gv_TargetSearchRange" SearchIdentifier="Player">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="AC_Guard"/>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnExecute>

            <Event_OnFrame>
                <AIEvent Type="SetDirectionToTarget"/>
            </Event_OnFrame>
        
            <Branch Condition="TargetDistance >= gv_guardOffDistance" Execute="AI_Entry"/>
            <Branch Condition="GuardBroken" Execute="AI_GuardBroken"/>
        </AI_Guard>

        <AI_GuardBroken UpdateTime="0.0">
            <Event_OnExecute>
                <AIEvent Type="SetAction" Action="AC_GuardBreak"/>
            </Event_OnExecute>
        
            <Branch Condition="End" Execute="AI_Entry"/>
        </AI_GuardBroken>

    </AIState>
</AIPackage>